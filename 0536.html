    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html lang="en" xmlns="http://www.w3.org/1999/xhtml">
      <head>
        <title>Two Methods to Grow A VirtualBox Disk Image (.vdi)</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
								<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
				        <script type="text/javascript">
          $(function(){
            $('textarea').each(function(i,e){
              theTextarea = $(this);
              theTextarea.height((theTextarea[0].scrollHeight-5) +'px');
            });

            $('li').each(function(i,e){
              var uuid = 'li_' + Math.floor(Math.random() * Math.floor(1000000)).toString() + '_' + i.toString();
              $(this).contents().wrap('<span id="'+ uuid +'"><label for="cb_'+ uuid +'"></label></span>');
              $(this).prepend('<input type="checkbox" class="completeBox" id="cb_' + uuid +'" rel="'+ uuid +'" />')
            });

            $('code,div.codeBlock,textarea.codeBlock').each(function(i,e){
              theElement = $(this);
              var lines = theElement.html().split("\n");
              theElement.empty();
              for(l=0;l<lines.length;l++){
                if($.trim(lines[l]) != '' && $.trim(lines[l]).substr(0,1) != '#' && $.trim(lines[l]).indexOf(' #') == -1 && lines[l].substr(0, 4).toUpperCase() != 'REM '){
									                  theElement.append('<input type="image" src="images/clipboard.png" value="" class="copy-text" rel="copy_'+ i +'_'+ l +'" data-clipboard-text="'+ $.trim(lines[l].replace(/"/g, '&quot;')) +'" /><span id="copy_'+ i +'_'+ l +'">'+ lines[l] +'</span>');
									                } else {
                  theElement.append(lines[l]);
                }
              }
            });

            $(document).on('click','input.copy-text',function(){
              theButton = $(this);
														$('input.copy-text').attr('src','images/clipboard.png');
							              $('span.copy-animation,span.copy-animation-ps').removeClass('copy-animation copy-animation-ps');
              try {
                if($('#'+ theButton.attr('rel')).parent('div').hasClass('PS')){
                  $('#'+ theButton.attr('rel')).addClass('copy-animation-ps');
								} else if($('#'+ theButton.attr('rel')).parent('div').hasClass('CMD')){
									$('#'+ theButton.attr('rel')).addClass('copy-animation-cmd');
                } else {
                  $('#'+ theButton.attr('rel')).addClass('copy-animation');
                }
                navigator.clipboard.writeText(theButton.data('clipboard-text').replace(/<[^>]*>?/gm, ''));
																theButton.attr('src','images/clipboard_active.png');
								              } catch(err) {
              }
              return false;
            });

            $(document).on('click','input.completeBox',function(){
              theBox = $(this);
              $('#'+ theBox.attr('rel')).addClass('strikethrough');
              theBox.prop('disabled',true);
              theBox.parent('li').prevAll().each(function(i,e){
                theLI = $(this);
                if(theLI.find('input[type=checkbox]').not(':checked')){
                  $('#'+ theLI.find('input[type=checkbox]').attr('rel')).addClass('strikethrough');
                  theLI.find('input[type=checkbox]').prop('checked',true).prop('disabled',true);
                }
              });
            });

            if(window.self !== window.top){
															window.parent.$('iframe.stepsFrame').height((this['scrollingElement']['scrollHeight']+20) +'px');
							            }
          });
        </script>
        <link href="css/steps.css" rel="stylesheet" type="text/css" />
      </head>
      <body>
        <div id="gridContainer">
          <div class="topMargin"></div>
          <div id="listName" class="topMargin">
            <h1>Two Methods to Grow A VirtualBox Disk Image (.vdi)</h1>
          </div>
          <div></div>
          <div id="content">
          <p><em>NOTE: Make a backup copy of the .vdi before attempting these steps</em></p>

<p>In this example, we&#39;ll be taking an 8GB Raspberry Pi OS VirtualBox VM and increasing the .vdi disk size to 32GB</p>

<h2>Method 1: Increasing the .vdi size</h2>

<p><em>This method requires that the virtual disk be dynamically allocated. If the .vdi is fixed size the size cannot be changed and VirtualBox will throw an error when you try to resize it</em></p>

<ol>
	<li>Launch VirtualBox Manager</li>
	<li>Select File &gt; Virtual Media Manager</li>
	<li>Find and click the .vdi file to increase in size</li>
	<li>Change the size at the bottom of the dialog window</li>
	<li>Click Apply and then Close</li>
	<li>Download the GParted live disc <a href="https://gparted.org/download.php" target="_blank">Download</a></li>
	<li>Back in VirtualBox Manager, right click the VM using the resized .vdi &gt; Settings...</li>
	<li>Select Storage from the left navigation pane</li>
	<li>Click on or add a new optical drive </li>
	<li>Select the disc dropdown to the right &gt; Choose a virtual optical disc file...</li>
	<li>Browse to and select the downloaded GParted .iso file</li>
	<li>Click OK</li>
	<li>Make sure the VM using the resized .vdi is selected and click Start &gt; Normal</li>
	<li>If prompted, press a key to boot to the CD-ROM</li>
	<li>GParted should begin loading</li>
	<li>Follow the prompts to set a keyboard layout and language</li>
	<li>GParted will automatically start once the desktop environment is displayed</li>
	<li>In the top right corner, select the correct device identifier to work with (ie /dev/sdb)</li>
	<li>In the middle section of the interface, right click the partition to resize &gt; Resize/Move</li>
	<li>Drag the slider or set the numerical values to set the new partition size &gt; Click Resize</li>
	<li>Click the check mark icon at the top center of the interface to Apply All Operations</li>
	<li>Once the resizing has completed, shutdown the VM</li>
	<li>Back in VirtualBox Manager, right click the VM &gt; Settings...</li>
	<li>Select Storage from the left navigation pane</li>
	<li>Click on the optical drive</li>
	<li>Select the disc dropdown to the right &gt; Remove Disk from Virtual Drive</li>
	<li>Click OK</li>
	<li>Make sure the VM is selected and click Start &gt; Normal</li>
	<li>The VM should boot normally with the OS showing the additional storage available</li>
</ol>

<h2>Method 2: Cloning to a new, larger .vdi</h2>

<p><em>This method can be used on either fixed size or dynamically allocated virtual disks</em></p>

<ol>
	<li>Launch VirtualBox Manager</li>
	<li>Select File &gt; Virtual Media Manager</li>
	<li>Click the Create icon at the top left of the dialog window</li>
	<li>Select VDI &gt; Next</li>
	<li>Select Dynamically allocated &gt; Next</li>
	<li>Set the file location and disk size &gt; Create</li>
	<li>Click Close</li>
	<li>Download the GParted live disc <a href="https://gparted.org/download.php" target="_blank">Download</a></li>
	<li>Back in VirtualBox Manager, right click the VM &gt; Settings...</li>
	<li>Select Storage from the left navigation pane</li>
	<li>Click the Controller to select it &gt; Add Hard Disk...</li>
	<li>Find and select the .vdi created previously &gt; Choose</li>
	<li>Click on or add a new optical drive </li>
	<li>Select the disc dropdown to the right &gt; Choose a virtual optical disc file...</li>
	<li>Browse to and select the downloaded GParted .iso file</li>
	<li>Click OK</li>
	<li>Make sure the VM using the resized .vdi is selected and click Start &gt; Normal</li>
	<li>If prompted, press a key to boot to the CD-ROM</li>
	<li>GParted should begin loading</li>
	<li>Follow the prompts to set a keyboard layout and language</li>
	<li>Once the desktop environment loads, minimize the GParted application</li>
	<li>Launch the terminal application from the desktop</li>
	<li>Run the following commands making absolutely certain the source/if and destination/of are input correctly in the dd command
	<div class="codeBlock"># output disk information, note the disk identifier for the source and destination targets<br />
	sudo fdisk -l<br />
	# use dd to clone the source to the destination<br />
	dd if=/dev/sda of=/dev/sdb bs=4M status=progress</div>
	</li>
	<li>Once dd has completed, restore the minimized GParted application</li>
	<li>In the top right corner, select the new larger device identifier to work with (ie /dev/sdb)</li>
	<li>In the middle section of the interface, right click the partition to resize &gt; Resize/Move</li>
	<li>Drag the slider or set the numerical values to set the new partition size &gt; Click Resize</li>
	<li>Click the check mark icon at the top center of the interface to Apply All Operations</li>
	<li>Once the resizing has completed, shutdown the VM</li>
	<li>Back in VirtualBox Manager, right click the VM &gt; Settings...</li>
	<li>Select Storage from the left navigation pane</li>
	<li>Click on the optical drive</li>
	<li>Select the disc dropdown to the right &gt; Remove Disk from Virtual Drive</li>
	<li>Right click on the original virtual disk &gt; Remove Attachment</li>
	<li>Click OK</li>
	<li>Make sure the VM is selected and click Start &gt; Normal</li>
	<li>The VM should boot normally with the OS showing the additional storage available</li>
</ol>
          </div>
        </div>
      </body>
    </html>
  